steal.has("stealconfig.js","opstools/MPDReport/views/MPDReport/MPDReport.ejs","opstools/MPDReport/controllers/MPDReport.js","opstools/MPDReport/views/MPDReportType/MPDReportType.ejs","opstools/MPDReport/controllers/MPDReportType.js","opstools/MPDReport/views/MPDReportUpload/MPDReportUpload.ejs","opstools/MPDReport/controllers/MPDReportUpload.js","opstools/MPDReport/views/MPDReportReview/MPDReportReview.ejs","opstools/MPDReport/views/MPDReportReview/filter.ejs","opstools/MPDReport/views/MPDReportReview/table.ejs",
"opstools/MPDReport/controllers/MPDReportReview.js","opstools/MPDReport/views/MPDReportSend/MPDReportSend.ejs","opstools/MPDReport/controllers/MPDReportSend.js","opstools/MPDReport/views/MPDReportSendNational/MPDReportSendNational.ejs","opstools/MPDReport/controllers/MPDReportSendNational.js","opstools/MPDReport/MPDReport.js");steal({id:"OpsPortal/production.js",waits:!0,has:"can/util/can.js can/util/array/each.js can/util/jquery/jquery.js can/util/util.js can/util/bind/bind.js can/util/string/string.js can/construct/construct.js can/observe/observe.js can/util/string/deparam/deparam.js can/route/route.js can/control/control.js can/control/route/route.js can/model/model.js can/view/view.js can/observe/compute/compute.js can/view/elements.js can/view/scanner.js can/view/node_lists.js can/view/live.js can/view/render.js can/view/ejs/ejs.js can/can.js can/construct/super/super.js appdev/ad.js js/OpenAjax.js appdev/comm/hub.js appdev/util/uuid.js js/async.js appdev/util/async.js appdev/config/config.js appdev/sal/web-jquery.js appdev/comm/socket.js appdev/model/model.js appdev/labels/lang.js appdev/labels/label.js appdev/comm/service.js appdev/widgets/ad_ui_reauth/ad_ui_reauth.css appdev/widgets/ad_ui_reauth/ad_ui_reauth.js appdev/auth/reauth.js appdev/UIController.js appdev/control/control.js appdev/widgets/ad_icon_busy/ad_icon_busy.css appdev/widgets/ad_icon_busy/ad_icon_busy.js appdev/appdev.js styles/genericList.css js/GenListDOM.ejs js/GenListItem.ejs GenericList.js OpsPortal/classes/OpsTool.js".split(" ")});
steal({id:"opstools/MPDReport/production.css",waits:!0,has:["opstools/MPDReport/balancereport-scratch.css"]});steal.pushPending();
steal.config({map:{"*":{"jquery/jquery.js":"jquery"}},paths:{jquery:"js/jquery.min.js","jquery-ui.js":"js/jquery-ui.min.js","bootstrap.js":"bootstrap/js/bootstrap.js","bootstrap.css":"bootstrap/css/bootstrap.min.css","wijmo-open.js":"js/jquery.wijmo-open.all.3.20142.45.min.js","wijmo-pro.css":"styles/jquery.wijmo-pro.all.3.20142.45.min.css","wijmo-pro.js":"js/jquery.wijmo-pro.all.3.20142.45.min.js","jquery-wijmo.css":"styles/jquery-wijmo.css","font-awesome.css":"styles/font-awesome.css","GenericList.js":"js/GenericList.js",
"dropzone.js":"js/dropzone.min.js","dropzone.css":"styles/dropzone.css"},shim:{jquery:{exports:"jQuery",ignore:!0},"js/dependencies/sails.io.js":{packaged:!1,ignore:!0},"site/labels/appdev.js":{packaged:!1,ignore:!0},"jquery-ui.js":{packaged:!1},"bootstrap.js":{packaged:!1},"wijmo-open.js":{packaged:!1},"wijmo-pro.js":{packaged:!1},"jquery-wijmo.css":{packaged:!1},"font-awesome.css":{packaged:!1},"js/jquery.sidr.min.js":{packaged:!1},"bootstrap/js/bootstrap-datepicker.js":{packaged:!1},"opsportal/requirements.js":{ignore:!0},
"site/labels/OpsPortal.js":{packaged:!1,ignore:!0},"site/labels/opstool-Dashboard.js":{packaged:!1,ignore:!0},"js/datatables/media/js/jquery.dataTables.min.js":{packaged:!1},"js/sDashboard/sDashboard.css":{packaged:!1},"js/Flotr2/flotr2.min.js":{packaged:!1},"js/sDashboard/jquery-sDashboard.js":{packaged:!1},"wijmo-pro.css":{packaged:!1},"site/labels/opstools/GMAMatrix.js":{packaged:!1,ignore:!0},"site/labels/HrisAdminObjects.js":{packaged:!1,ignore:!0},"site/labels/HRISUserProfile.js":{packaged:!1,
ignore:!0},"dropzone.js":{packaged:!1},"dropzone.css":{packaged:!1},"site/labels/opstool-MPDReport.js":{packaged:!1,ignore:!0}},amd:!1});steal.executed("stealconfig.js");
steal("can/view/ejs",function(a){return a.view.preload("opstools_MPDReport_views_MPDReport_MPDReport_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<div class="opsportal-stage-container opsportal-padding-bottom-2x">\n    <div class="gen-btn-list tool-balance-report-nav">\n        <h2 class="opsportal-stage-title">\n            Balance Report Tool \n                &nbsp;|&nbsp; \n                <a class="active-btn" href="#US">US Staff</a>\n                &nbsp;|&nbsp; \n                <a href="#NATIONAL">National Staff</a>\n        </h2>\n        <ul class="us-report-steps list-unstyled list-inline">\n        <li><a href="#upload" class="btn opsportal-btn opsportal-btn-dk active-btn" role="button">1. Upload CSV Report</a></li>\n        <li><a href="#review" class="btn opsportal-btn opsportal-btn-dk" role="button">2. Review Report</a></li>\n        <li><a href="#email" class="btn opsportal-btn opsportal-btn-dk" role="button">3. Send Email</a></li>\n        </ul>\n        <ul class="national-report-steps list-unstyled list-inline">\n        <li><a href="#review" class="btn opsportal-btn opsportal-btn-dk" role="button">1. Review Report</a></li>\n        <li><a href="#email" class="btn opsportal-btn opsportal-btn-dk" role="button">2. Send Email</a></li>\n        </ul>\n    </div>\n    \n    \n    <div class="row">\n        <div class=\'col-md-12 opsportal-stage-full\'>\n            <div class=\'tool-balance-container tool-balance-report-type\'></div>\n            <div class=\'tool-balance-container tool-balance-report-upload\'></div>\n            <div class=\'tool-balance-container tool-balance-report-review\'></div>\n            <div class=\'tool-balance-container tool-balance-report-send\'></div>\n            <div class=\'tool-balance-container tool-balance-report-send-national\'></div>\n        </div>\t\t\t\n    </div>\n</div>');return d.join("")}}))});
steal.executed("opstools/MPDReport/views/MPDReport/MPDReport.ejs");
steal("appdev","GenericList.js","OpsPortal/classes/OpsTool.js","//opstools/MPDReport/views/MPDReport/MPDReport.ejs").then(function(){AD.Control.OpsTool.extend("MPDReport",{init:function(a,b){var c=this;this.options=b=AD.defaults({templateDOM:"//opstools/MPDReport/views/MPDReport/MPDReport.ejs",resize_notification:"MPDReport.resize",tool:null},b);c.toolState={staffType:"#US"};AD.classes.opsportal.OpsTool.prototype.init.apply(this,arguments);this.dataSource=this.options.dataSource;this.initDOM();c.toolUpload=
new AD.controllers.opstools.MPDReport.MPDReportUpload(this.element.find(".tool-balance-report-upload"),{toolState:c.toolState});c.toolReview=new AD.controllers.opstools.MPDReport.MPDReportReview(this.element.find(".tool-balance-report-review"),{toolState:c.toolState});c.toolSend=new AD.controllers.opstools.MPDReport.MPDReportSend(this.element.find(".tool-balance-report-send"),{toolState:c.toolState});c.toolSendNS=new AD.controllers.opstools.MPDReport.MPDReportSendNational(this.element.find(".tool-balance-report-send-national"),
{toolState:c.toolState});this.toggleStaffType("#US");AD.comm.hub.subscribe("opsportal.resize",function(a,b){c.element.css("height",b.height+"px");c.element.find(".opsportal-stage-container").css("height",b.height+"px")});can.bind.call(c.toolUpload,"uploaded",function(){c.showTool("#review");c.toolReview.loadResults()});can.bind.call(c.toolReview,"approved",function(){c.showTool("#email")})},showTool:function(a){this.element.find(".tool-balance-report-nav li a.active-btn").removeClass("active-btn");
this.element.find(".tool-balance-report-nav li a[href='"+a+"']").addClass("active-btn");this.element.find(".tool-balance-container").hide();switch(a){case "#upload":this.toolUpload.show();break;case "#review":this.toolReview.show();break;case "#email":"#US"==this.toolState.staffType?this.toolSend.show():this.toolSendNS.show();break;default:console.log("Invalid tool key: "+a)}},toggleStaffType:function(a){this.toolState.staffType=a;"#US"==a?(this.element.find("ul.national-report-steps").hide(),this.element.find("ul.us-report-steps").show(),
this.showTool("#upload"),this.toolReview.clearData()):(this.element.find("ul.us-report-steps").hide(),this.element.find("ul.national-report-steps").show(),this.showTool("#review"),this.toolReview.loadResults())},initDOM:function(){this.element.html(can.view(this.options.templateDOM,{}))},".opsportal-stage-title a click":function(a,b){this.element.find(".opsportal-stage-title a.active-btn").removeClass("active-btn");a.addClass("active-btn");this.toggleStaffType(a.attr("href"));b.preventDefault()},
".tool-balance-report-nav li a.btn click":function(a,b){this.showTool(a.attr("href"));b.preventDefault()}})});steal.executed("opstools/MPDReport/controllers/MPDReport.js");
steal("can/view/ejs",function(a){return a.view.preload("opstools_MPDReport_views_MPDReportType_MPDReportType_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<div class="opsportal-stage-container opsportal-padding-bottom-2x" id="balance-report-stage">\n\t<div class="opsportal-stage-main">\n\t\t<div class="row">\n\t\t\t<div class="col-md-6 col-md-push-3 opsportal-margin-top-2x">\n\t\t\t\t<p class="text-center opsportal-margin-top-2x">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi a diam egestas, sodales sapien sed, pharetra nisi. Proin sit amet sem tortor.</p>\n\t\t\t\t<ul id="balrep-type-list">\n\t\t\t\t\t<li><a href="" title="US Staff" id="staff-us">US Staff</a></li>\n\t\t\t\t\t<li><a href="" title="National Staff" id="staff-national">National Staff</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t</div> <\!-- end .opsportal-stage-main --\>\n</div> <\!-- opsportal-stage-container --\>');return d.join("")}}))});
steal.executed("opstools/MPDReport/views/MPDReportType/MPDReportType.ejs");
steal("appdev","//opstools/MPDReport/views/MPDReportType/MPDReportType.ejs",function(){AD.Control.extend("opstools.MPDReport.MPDReportType",{init:function(a,b){var c=this;this.options=AD.defaults({templateDOM:"//opstools/MPDReport/views/MPDReportType/MPDReportType.ejs"},b);this.initDOM();AD.comm.hub.subscribe("opsportal.resize",function(a,b){c.element.css("height",b.height+"px");c.element.find(".opsportal-stage-container").css("height",b.height+"px");console.log("The stage container height is "+b.height)})},
nextStep:function(){},initDOM:function(){this.element.html(can.view(this.options.templateDOM,{}))},"#staff-us click":function(a,b){console.log("US Staff selected!");self.nextStep("upload");b.preventDefault()},"#staff-national click":function(a,b){console.log("National Staff selected!");self.nextStep("review");b.preventDefault()}})});steal.executed("opstools/MPDReport/controllers/MPDReportType.js");
steal("can/view/ejs",function(a){return a.view.preload("opstools_MPDReport_views_MPDReportUpload_MPDReportUpload_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<div class="opsportal-stage-main">\n\t\t<div class="row">\n\t\t\t<div class="col-md-4 col-md-push-4 opsportal-margin-top-2x">\n\t\t\t\t\n\t\t\t\t<form action="#" class="dropzone" id="staff-report-uploader">\n\t\t\t\t\t<div class="dz-message">\n\t\t\t\t\t\t<span class="first">Drag file here</span>\n\t\t\t\t\t\t<span>- or -</span>\n\t\t\t\t\t\t<span class="opsportal-margin-top"><a href="#" title="Click to open the file browser" class="btn opsportal-btn opsportal-btn-dk">Click to open the file browser</a></span>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t</div> <\!-- end .opsportal-stage-main --\>\n');
return d.join("")}}))});steal.executed("opstools/MPDReport/views/MPDReportUpload/MPDReportUpload.ejs");
steal("appdev","//opstools/MPDReport/views/MPDReportUpload/MPDReportUpload.ejs",function(){AD.Control.extend("opstools.MPDReport.MPDReportUpload",{init:function(a,b){var c=this;this.options=AD.defaults({templateDOM:"//opstools/MPDReport/views/MPDReportUpload/MPDReportUpload.ejs"},b);this.key="#upload";this.initDOM();(new Dropzone("#staff-report-uploader",{url:"/mpdreport/upload",acceptedFiles:".csv",paramName:"csvFile"})).on("success",function(){can.trigger(c,"uploaded")})},show:function(){this.element.show()},
initDOM:function(){this.element.html(can.view(this.options.templateDOM,{}))}})});steal.executed("opstools/MPDReport/controllers/MPDReportUpload.js");
steal("can/view/ejs",function(a){return a.view.preload("opstools_MPDReport_views_MPDReportReview_MPDReportReview_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('\n<div class="opsportal-stage-main">\n<div class="row">\n\t<div class="col-md-12 center-block opsportal-filter">\n\t</div>\n\t<div class="col-md-12 opsportal-content-block opsportal-margin-top-2x">\n\t\t<div class="gen-btn-list">\n\t\t\t<\!-- <h5 class="opsportal-content-block-title">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h5> --\>\n\t\t\t<ul class="list-unstyled list-inline">\n            <li><a href="#balrep-report-reload" class="btn opsportal-btn opsportal-btn-dk ad-staffrpt-reload">Reload</a><li>\n\t\t\t<li><a href="#balrep-report-approve" class="btn opsportal-btn opsportal-btn-dk" role="button">Approve Report</a></li>\n\t\t\t<li><a href="#balrep-report-error" class="btn opsportal-btn opsportal-btn-dk" role="button" data-toggle="modal">Report Error</a></li>\n\t\t\t</ul>\n\t\t</div>\n\t\t\n\t\t<div class="modal fade" id="balrep-report-error" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n\t\t\t<div class="modal-dialog modal-lg">\n\t\t\t<div class="modal-content">\n\t\t\t\t<div class="modal-header">\n\t\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n\t\t\t\t\t<h4 class="modal-title" id="myModalLabel">Report Error</h4>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal-body">\n\t\t\t\t\t<div class="balrep-form-container" id="balrep-contact-form">\n\t\t\t\t\t<form class="form-horizontal">\n\t\t\t\t\t<fieldset>\n\t\t\t\t\t<\!-- Form Name --\>\n\t\t\t\t\t<legend class="hidden">Report Error</legend>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t</fieldset>\n\t\t\t\t\t</form>\n\t\t\t\t\t</div> <\!-- end #hris-user-legal --\>\n\t\t\t\t</div><\!-- .container --\>\n\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t<button type="button" class="btn opsportal-btn opsportal-btn-dk" data-dismiss="modal">Cancel</button>\n\t\t\t\t\t<button type="button" class="btn btn-primary pull-right opsportal-btn">Send</button>\n\t\t\t\t</div>\n\t\t\t</div><\!-- /.modal-content --\>\n\t\t</div><\!-- /.modal-dialog --\>\n\t\t</div><\!-- /.modal --\>\n\t\t\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <div class="loading-indicator"></div>\n            </div>\n        </div>\t\t\n\t\t<div class="row">\n\t\t\t<div class="col-md-12 opsportal-table-container">\n\t\t\t<\!--\n\t\t\t\t<table class="table opsportal-table" id="balreport-review-table">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Account Number</th>\n\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t<th>Current Account Balance</th>\n\t\t\t\t\t\t\t<th>Avg Monthly Balance</th>\n\t\t\t\t\t\t\t<th># Months in Deficit</th>\n\t\t\t\t\t\t\t<th>Months until Deficit</th>\n\t\t\t\t\t\t\t<th>Phone</th>\n\t\t\t\t\t\t\t<th>Email</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t    <tr class="template-row">\n\t\t\t\t\t        <td field="accountNum"></td>\n\t\t\t\t\t        <td field="name"></td>\n\t\t\t\t\t        <td field="accountBal"></td>\n\t\t\t\t\t        <td field="avgAccountBal"></td>\n\t\t\t\t\t        <td field="monthsInDeficit"></td>\n\t\t\t\t\t        <td field="monthsTilDeficit"></td>\n\t\t\t\t\t        <td field="phone"></td>\n\t\t\t\t\t        <td field="email"><a></a></td>\n\t\t\t\t\t    </tr>\n\t\t\t\t\t    \n\t\t\t\t\t    \n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr class="alt">\n\t\t\t\t\t\t\t<td>000119231</td>\n\t\t\t\t\t\t\t<td>Doe, Jane (Jane)</td>\n\t\t\t\t\t\t\t<td class="balrep-deficit">-7651</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td class="balrep-months-deficit">2</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>000119873</td>\n\t\t\t\t\t\t\t<td>Hausmann, Johnny (Johnny)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td class="balrep-12-deficit">1</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr class="alt">\n\t\t\t\t\t\t\t<td>000119917</td>\n\t\t\t\t\t\t\t<td>Poolman, Ric (Ric)</td>\n\t\t\t\t\t\t\t<td>17462</td>\n\t\t\t\t\t\t\t<td>13769</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td class="balrep-3-deficit">3</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<tr class="alt">\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr class="alt">\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr class="alt">\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr class="alt">\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr class="alt">\n\t\t\t\t\t\t\t<td>000119225</td>\n\t\t\t\t\t\t\t<td>Beverly, Peter Michael (Peter)</td>\n\t\t\t\t\t\t\t<td>16794</td>\n\t\t\t\t\t\t\t<td>17031</td>\n\t\t\t\t\t\t\t<td>0</td>\n\t\t\t\t\t\t\t<td>???</td>\n\t\t\t\t\t\t\t<td>15928694459 (m)</td>\n\t\t\t\t\t\t\t<td><a href="mailto:pbeverly@ccomm.biz">pbeverly@ccomm.biz</a></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t--\>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\t\t\n</div> <\!-- end .opsportal-stage-main --\>\n');return d.join("")}}))});
steal.executed("opstools/MPDReport/views/MPDReportReview/MPDReportReview.ejs");
steal("can/view/ejs",function(a){return a.view.preload("opstools_MPDReport_views_MPDReportReview_filter_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('\n        <ul class="nav">\n            <li class="opsportal-filter-label">Filter: </li>\n');d.push(a.view.txt(0,"ul",0,this,function(){var b=[];regions.forEach(function(c){var d="";c==selected&&(d="filter-on");b.push('            <li><a href="#" class="balrep-filter-tag ');b.push(a.view.txt(1,"a","class",this,function(){return d}));b.push('" data-balrep-filter="');
b.push(a.view.txt(1,"a","data-balrep-filter",this,function(){return c}));b.push('"',a.view.pending(),">");b.push(a.view.txt(1,"a",0,this,function(){return c}));b.push("</a></li>\n")});return b.join("")}));d.push("        </ul>\n");return d.join("")}}))});steal.executed("opstools/MPDReport/views/MPDReportReview/filter.ejs");
steal("can/view/ejs",function(a){return a.view.preload("opstools_MPDReport_views_MPDReportReview_table_ejs",a.EJS(function(b,c){with(c)with(b){var d=[],e=[],f;for(f in dataSet)e.push(dataSet[f]);d.push('\n                <table class="table opsportal-table" id="balreport-review-table">\n                    <thead>\n                        <tr>\n                            <th>Account Number</th>\n                            <th>Name</th>\n                            <th>Current Account Balance</th>\n                            <th>Avg Monthly Balance</th>\n                            <th># Months in Deficit</th>\n                            <th>Months until Deficit</th>\n                            <th>Phone</th>\n                            <th>Email</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n');
d.push(a.view.txt(0,"tbody",0,this,function(){var b=[],c="accountNum name accountBal avgAccountBal monthsInDeficit monthsTilDeficit phone email".split(" ");e.forEach(function(d){b.push("                        <tr>\n");b.push(a.view.txt(0,"tr",0,this,function(){var b=[];c.forEach(function(c){b.push(a.view.txt(0,"tr",0,this,function(){var b=[],e=d[c];if("email"==c)b.push('                            <td field="'),b.push(a.view.txt(1,"td","field",this,function(){return c})),b.push('"',a.view.pending(),
">"),b.push('<a href="mailto:'),b.push(a.view.txt(1,"a","href",this,function(){return e})),b.push('"',a.view.pending(),">"),b.push(a.view.txt(1,"a",0,this,function(){return e})),b.push("</a></td>\n    ");else{var f="";"accountBal"==c&&2E3>e&&(f="balrep-warn");"accountBal"==c&&0>e&&(f="balrep-deficit");"monthsInDeficit"==c&&0<e&&(f="balrep-months-deficit");b.push('                            <td class="');b.push(a.view.txt(0,"td","class",this,function(){return f}));b.push('" field="');b.push(a.view.txt(1,
"td","field",this,function(){return c}));b.push('"',a.view.pending(),">");b.push(a.view.txt(1,"td",0,this,function(){return d[c]}));b.push("</td>\n    ")}return b.join("")}))});return b.join("")}));b.push("                       </tr>\n")});return b.join("")}));d.push("\n                    </tbody>\n                </table>");return d.join("")}}))});steal.executed("opstools/MPDReport/views/MPDReportReview/table.ejs");
steal("appdev","//opstools/MPDReport/views/MPDReportReview/MPDReportReview.ejs","//opstools/MPDReport/views/MPDReportReview/filter.ejs","//opstools/MPDReport/views/MPDReportReview/table.ejs",function(){AD.Control.extend("opstools.MPDReport.MPDReportReview",{init:function(a,b){var c=this;this.options=AD.defaults({templateDOM:"//opstools/MPDReport/views/MPDReportReview/MPDReportReview.ejs",templateFilter:"//opstools/MPDReport/views/MPDReportReview/filter.ejs",templateTable:"//opstools/MPDReport/views/MPDReportReview/table.ejs"},
b);c.toolState=b.toolState;this.btnReload=null;this.reportData={staffByRegion:{},missing:{}};this.regionList={};AD.comm.service.get({url:"/nsmpdreport/regions"}).fail(function(a){console.error(a)}).done(function(a){console.log(a);c.regionList.national=a});this.key="#review";this.initDOM();AD.comm.hub.subscribe("ad.mpdreport.file.uploaded",function(){c.loadResults()})},show:function(){this.element.show()},clearData:function(){this.element.find("#balreport-review-table tbody tr").remove()},currentFilter:function(){var a=
"",b=this.filter.find(".filter-on");b&&b.length&&(a="array"==typeof b?b[0].text():b.text());return a},currentRegionList:function(){var a=null;if("#US"==this.toolState.staffType){var a=[],b;for(b in this.reportData.staffByRegion)a.push(b)}else b=this.toolState.staffType.replace("#","").toLowerCase(),this.regionList[b]&&(a=[],this.regionList[b].forEach(function(b){a.push(b)}));return a},defaultFilter:function(){var a=this.currentFilter();if(""==a){var b=this.currentRegionList();b?a=b[0]:console.warn("*** warn: could not determine a default filter")}return a},
displayFilters:function(){var a=this.currentRegionList(),b=this.defaultFilter();"#US"==this.toolState.staffType&&this.reportData.missing&&a.push("missing");this.filter.html(can.view(this.options.templateFilter,{regions:a,selected:b}))},displayData:function(a){var b;"undefined"==typeof a&&(a="#US"==this.toolState.staffType?"missing":"AOA");b="missing"==a?this.reportData.missing:this.reportData.staffByRegion[a];this.updateFilterTag(a);a=this.element.find(".opsportal-table-container");b&&a.html(can.view(this.options.templateTable,
{dataSet:b}))},initDOM:function(){this.element.html(can.view(this.options.templateDOM,{}));var a=this.element.find(".loading-indicator");this.loadIndicator=new AD.widgets.ad_icon_busy(a);this.filter=this.element.find(".opsportal-filter")},getData:function(a){var b=this,c,d;c="#US"==b.toolState.staffType?"/mpdreport/data":"/nsmpdreport/dataForRegion";var e=this.currentFilter();""==e&&(d=this.currentRegionList())&&(e=d[0]);AD.comm.service.get({url:c,params:{region:e},dataType:"json"}).fail(function(b){a(b,
null)}).done(function(c){console.log(c);b.reportData=c;a(null,c)})},loadResults:function(){var a=this;if("#US"==a.toolState.staffType)this.loadIndicator.show(),this.getData(function(b){a.loadIndicator.hide();b?console.log(b):(a.displayFilters(),a.displayData())});else{var b=[],c=null;AD.util.async.series([function(c){(b=a.currentRegionList())?c():(a.loadIndicator.show(),AD.comm.service.get({url:"/nsmpdreport/regions"}).fail(function(b){a.loadIndicator.hide();c(b)}).done(function(e){a.loadIndicator.hide();
b=a.regionList.national=e;c()}))},function(b){c=a.defaultFilter();b()},function(b){a.reportData.staffByRegion[c]?b():(a.loadIndicator.show(),AD.comm.service.get({url:"/nsmpdreport/dataForRegion",params:{region:c}}).fail(function(e){a.loadIndicator.hide();console.error(" error loading dataForRegion(): currentRegion:"+c);console.error(e);b(e)}).done(function(e){a.loadIndicator.hide();var f={};e.forEach(function(a){f[a.accountNum]=a});a.reportData.staffByRegion[c]=f;b()}))},function(){a.displayFilters();
a.displayData(c)}],function(a){a?console.error(a):console.log("ns staff report loadData() completed.")})}},updateFilterTag:function(a){this.filter.find(".balrep-filter-tag").removeClass("filter-on");this.filter.find('a[data-balrep-filter="'+a+'"]').addClass("filter-on")},"a[href='#balrep-report-reload'] click":function(a,b){"#US"!=this.toolState.staffType&&(this.reportData.staffByRegion={});this.loadResults();b.preventDefault()},"a[href='#balrep-report-approve'] click":function(){can.trigger(this,
"approved")},"a.balrep-filter-tag click":function(a,b){var c=a.attr("data-balrep-filter");this.updateFilterTag(c);"#US"==this.toolState.staffType?this.displayData(c):this.loadResults();b.preventDefault()}})});steal.executed("opstools/MPDReport/controllers/MPDReportReview.js");
steal("can/view/ejs",function(a){return a.view.preload("opstools_MPDReport_views_MPDReportSend_MPDReportSend_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<div class="opsportal-stage-main">\n\t\t<div class="row">\n\t\t\t<div class="col-md-4 col-md-push-4 opsportal-margin-top-2x">\n\t\t\t\t\n\t\t\t\t<div class="balrep-send-container">\n\t\t\t\t\t<div class="balrep-send">\n\t\t\t\t\t\t<span class="opsportal-margin-top first"><a href="#" title="Click to send report" class="btn opsportal-btn opsportal-btn-dk" id="balance-report-send-btn">Click to send email report</a></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="balrep-indicator"><span></span></div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t</div> <\!-- end .opsportal-stage-main --\>');return d.join("")}}))});
steal.executed("opstools/MPDReport/views/MPDReportSend/MPDReportSend.ejs");
steal("appdev","appdev/widgets/ad_icon_busy","//opstools/MPDReport/views/MPDReportSend/MPDReportSend.ejs",function(){AD.Control.extend("opstools.MPDReport.MPDReportSend",{init:function(a,b){this.options=AD.defaults({templateDOM:"//opstools/MPDReport/views/MPDReportSend/MPDReportSend.ejs"},b);this.toolState=b.toolState;this.key="#email";this.initDOM();var c=this.element.find(".balrep-indicator span");this.busyIndicator=new AD.widgets.ad_icon_busy(c)},show:function(){this.element.show()},initDOM:function(){this.element.html(can.view(this.options.templateDOM,
{}))},"#balance-report-send-btn click":function(a,b){var c=this;b.preventDefault();c.busyIndicator.show();$.ajax({url:"/mpdreport/email/send",dataType:"json"}).always(function(){c.busyIndicator.hide()}).fail(function(a){console.log(a)})}})});steal.executed("opstools/MPDReport/controllers/MPDReportSend.js");
steal("can/view/ejs",function(a){return a.view.preload("opstools_MPDReport_views_MPDReportSendNational_MPDReportSendNational_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('\n<div class="opsportal-stage-main">\n\t\t<div class="row">\n\t\t\t<div class="col-md-4 col-md-push-4 opsportal-margin-top-2x">\n\t\t\t\t\n\t\t\t\t<div class="balrep-send-container">\n\t\t\t\t\t<div class="balrep-send">\n\t\t\t\t\t\t<span class="opsportal-margin-top first">\n\t\t\t\t\t\t  <a href="#send-regional" title="Click to send report" class="btn opsportal-btn opsportal-btn-dk">\n\t\t\t\t\t\t      Click to send email report to <em>Regional Leaders</em>\n\t\t\t\t\t\t  </a>\n\t\t\t\t        </span>\n\t\t\t\t\t\t<span class="opsportal-margin-top">\n\t\t\t\t\t\t  <a href="#send-individual" title="Click to send report" class="btn opsportal-btn opsportal-btn-dk">\n\t\t\t\t\t\t      Click to send email report to <em>Staff</em>\n\t\t\t\t\t\t  </a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="balrep-indicator"><span></span></div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\t\n</div> <\!-- end .opsportal-stage-main --\>\n');return d.join("")}}))});
steal.executed("opstools/MPDReport/views/MPDReportSendNational/MPDReportSendNational.ejs");
steal("appdev","appdev/widgets/ad_icon_busy","//opstools/MPDReport/views/MPDReportSendNational/MPDReportSendNational.ejs",function(){AD.Control.extend("opstools.MPDReport.MPDReportSendNational",{init:function(a,b){var c=this;this.options=AD.defaults({templateDOM:"//opstools/MPDReport/views/MPDReportSendNational/MPDReportSendNational.ejs"},b);c.toolState=b.toolState;this.key="#email";this.initDOM();var d=this.element.find(".balrep-indicator span");this.busyIndicator=new AD.widgets.ad_icon_busy(d);
AD.comm.hub.subscribe("opsportal.resize",function(a,b){c.element.css("height",b.height+"px");c.element.find(".opsportal-stage-container").css("height",b.height+"px")})},show:function(){this.element.show()},initDOM:function(){this.element.html(can.view(this.options.templateDOM,{}))},".balrep-send a click":function(a,b){var c=this,d,e=a.attr("href");"#send-individual"==e?d="/nsmpdreport/email/individual/send":"#send-regional"==e&&(d="/nsmpdreport/email/send");c.busyIndicator.show();$.ajax({url:d,dataType:"json"}).always(function(){c.busyIndicator.hide()}).fail(function(a){console.log(a)});
b.preventDefault()}})});steal.executed("opstools/MPDReport/controllers/MPDReportSendNational.js");steal("opstools/MPDReport/controllers/MPDReport.js","opstools/MPDReport/balancereport-scratch.css").then("opstools/MPDReport/controllers/MPDReportType.js","opstools/MPDReport/controllers/MPDReportUpload.js","opstools/MPDReport/controllers/MPDReportReview.js","opstools/MPDReport/controllers/MPDReportSend.js","opstools/MPDReport/controllers/MPDReportSendNational.js").then("dropzone.js","dropzone.css","site/labels/opstool-MPDReport.js").then(function(){});
steal.executed("opstools/MPDReport/MPDReport.js");steal.popPending();
